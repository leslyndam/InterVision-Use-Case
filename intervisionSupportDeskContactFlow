{"Version":"2019-10-30","StartAction":"30b7f283-2d71-4b89-8025-2e130f78e49a","Metadata":{"entryPointPosition":{"x":40,"y":40},"ActionMetadata":{"05ca6b78-29c4-4782-89e8-81d212cd2cff":{"position":{"x":2207.2,"y":468.8}},"8cc5d066-7c63-4f73-9ce1-fe0f3f380e7f":{"position":{"x":1913.6,"y":448.8},"parameters":{"QueueId":{"displayName":"BasicQueue"}},"queue":{"text":"BasicQueue"}},"8a84697a-7426-4b25-846b-a8390c6adf46":{"position":{"x":2780,"y":524.8}},"c5a725ae-0fd0-4a06-a3fd-f6572711d2f1":{"position":{"x":192,"y":88},"parameters":{"LambdaFunctionARN":{"displayName":"connect101-get-prompts"}},"dynamicMetadata":{"FlowName":false}},"22847f1d-60ee-42f9-bf84-1a3511b67060":{"position":{"x":3007.2,"y":376.8},"parameters":{"SSML":{"useDynamic":true}},"useDynamic":true},"7d9e0611-0ab1-462f-8c98-7e8d991a7fe2":{"position":{"x":3430.4,"y":-39.2}},"925eb6a7-b172-41c6-937a-d58115bfe469":{"position":{"x":3280,"y":134.4},"parameters":{"SSML":{"useDynamic":true},"LexV2Bot":{"AliasArn":{"displayName":"TestBotAlias","useLexBotDropdown":true,"lexV2BotName":"help-desk-menu"}}},"useLexBotDropdown":true,"lexV2BotName":"help-desk-menu","lexV2BotAliasName":"TestBotAlias","useDynamic":true,"conditionMetadata":[{"id":"ab180066-5a1c-4c58-8351-85c72ecc99f5","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"repeat"}]},"dd17c1e7-cb47-4e59-972d-0c5e06e98d81":{"position":{"x":3065.6,"y":9.6},"parameters":{"Attributes":{"password":{"useDynamic":true}}},"dynamicParams":["password"]},"b6d77d71-6b55-4484-88f6-faa6281fb854":{"position":{"x":2887.2,"y":146.4},"conditions":[],"conditionMetadata":[{"id":"46af81fb-6e18-4ad3-9395-649c68e722f6","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"200"}]},"77c11a71-1b5b-49eb-b38c-f19f2cc08989":{"position":{"x":2565.6,"y":128},"parameters":{"LambdaFunctionARN":{"displayName":"ConnectTestFunction"}},"dynamicMetadata":{}},"b60aacf4-7b02-493e-86eb-33f2ae20f0f3":{"position":{"x":1231.2,"y":482.4}},"d8528394-4550-4511-a839-f1e4091f0dd4":{"position":{"x":1404.8,"y":683.2},"parameters":{"SSML":{"useDynamic":true}},"useDynamic":true},"4f75711a-727f-4b4c-9c8e-f1bba13a71ce":{"position":{"x":1610.4,"y":428.8},"parameters":{"SSML":{"useDynamic":true}},"useDynamic":true},"3e0cd842-dd65-46e5-9530-73df4d276d23":{"position":{"x":472.8,"y":112.8},"conditions":[],"conditionMetadata":[{"id":"ab55e1a0-da9c-45d4-9e08-6a4c9f815bb8","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"200"}]},"af00c3c5-b53e-45f4-be94-27e5a7dc4aef":{"position":{"x":1864,"y":-164.8}},"f4864b33-a40f-4dbb-a73f-f844a6f0f310":{"position":{"x":1516,"y":-170.4},"parameters":{"SSML":{"useDynamic":true}},"useDynamic":true},"777bb93a-45df-4c18-b196-bfed3f02c95e":{"position":{"x":2107.2,"y":156.8},"conditions":[],"conditionMetadata":[{"id":"412f1621-7da0-4c51-a70c-2408dc1e3c87","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"true"}]},"ff51199c-f92e-421f-aade-752456ce4a27":{"position":{"x":1548.8,"y":122.4},"parameters":{"SSML":{"useDynamic":true}},"useDynamic":true},"ee9df9a2-5abe-41f3-a17d-1fc4e32bfc02":{"position":{"x":1828.8,"y":112.8},"parameters":{"SSML":{"useDynamic":true},"LexV2Bot":{"AliasArn":{"displayName":"TestBotAlias","useLexBotDropdown":true,"lexV2BotName":"employee-authentication-bot"}},"LexSessionAttributes":{"prmEmployeeId":{"useDynamic":true},"prmEmployeeIdConfirmation":{"useDynamic":true},"prmRetry":{"useDynamic":true},"prmEmployeeNotFound":{"useDynamic":true},"prmVerificationCode":{"useDynamic":true},"prmEmployeeIdConfirmation2":{"useDynamic":true},"prmVerificationCode2":{"useDynamic":true}}},"dynamicMetadata":{"prmEmployeeId":true,"prmEmployeeIdConfirmation":true,"prmRetry":true,"prmEmployeeNotFound":true,"prmVerificationCode":true,"prmEmployeeIdConfirmation2":true,"prmVerificationCode2":true},"useLexBotDropdown":true,"lexV2BotName":"employee-authentication-bot","lexV2BotAliasName":"TestBotAlias","useDynamic":true,"conditionMetadata":[{"id":"563c01be-9ed4-4804-8345-00f218b9bcb5","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"authenticate"}]},"ea91ba5b-d472-4626-9d23-c53694ced7e6":{"position":{"x":1250.4,"y":127.2},"parameters":{"SSML":{"useDynamic":true},"LexV2Bot":{"AliasArn":{"displayName":"TestBotAlias","useLexBotDropdown":true,"lexV2BotName":"help-desk-menu"}}},"useLexBotDropdown":true,"lexV2BotName":"help-desk-menu","lexV2BotAliasName":"TestBotAlias","useDynamic":true,"conditionMetadata":[{"id":"5bc7e591-3c96-4efb-93e9-9d6ce23b5bb0","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"passwordReset"},{"id":"429634bf-19ad-430c-b604-b7a07c948b32","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"agent"},{"id":"2b46d33c-b461-421e-b8ed-9f84e98baead","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"repeat"}]},"1c67e7f5-21c9-420f-a75c-a9372033b33a":{"position":{"x":728.8,"y":115.2},"parameters":{"Attributes":{"prmGreeting":{"useDynamic":true},"prmMenu":{"useDynamic":true},"prmTransfer":{"useDynamic":true},"prmAuthDisclaimer":{"useDynamic":true},"prmEmployeeId":{"useDynamic":true},"prmRetry":{"useDynamic":true},"prmEmployeeIdConfirmation":{"useDynamic":true},"prmEmployeeNotFound":{"useDynamic":true},"prmVerificationCode":{"useDynamic":true},"prmTempPassword":{"useDynamic":true},"prmThankYou":{"useDynamic":true},"prmEmployeeIdConfirmation2":{"useDynamic":true},"prmVerificationCode2":{"useDynamic":true}}},"dynamicParams":["prmGreeting","prmMenu","prmTransfer","prmAuthDisclaimer","prmEmployeeId","prmRetry","prmEmployeeIdConfirmation","prmEmployeeNotFound","prmVerificationCode","prmTempPassword","prmThankYou","prmEmployeeIdConfirmation2","prmVerificationCode2"]},"9c264a37-832b-41ac-9cfe-d3829d2f94fd":{"position":{"x":2496.8,"y":474.4}},"11f525b0-61de-4fc9-92a0-62b9aa053b63":{"position":{"x":993.6,"y":126.4},"parameters":{"SSML":{"useDynamic":true}},"useDynamic":true},"30b7f283-2d71-4b89-8025-2e130f78e49a":{"position":{"x":-40.8,"y":240.8}}},"Annotations":[],"name":"PasswordResetSample","description":"","type":"contactFlow","status":"published","hash":{}},"Actions":[{"Parameters":{},"Identifier":"05ca6b78-29c4-4782-89e8-81d212cd2cff","Type":"TransferContactToQueue","Transitions":{"NextAction":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","Errors":[{"NextAction":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","ErrorType":"QueueAtCapacity"},{"NextAction":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","ErrorType":"NoMatchingError"}]}},{"Parameters":{"QueueId":"arn:aws:connect:us-east-1:025713692514:instance/4d45adc8-2c52-422c-a20c-745e8a70b1ce/queue/514d28f7-d14b-4e2f-8c68-547c988e9fab"},"Identifier":"8cc5d066-7c63-4f73-9ce1-fe0f3f380e7f","Type":"UpdateContactTargetQueue","Transitions":{"NextAction":"05ca6b78-29c4-4782-89e8-81d212cd2cff","Errors":[{"NextAction":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","ErrorType":"NoMatchingError"}]}},{"Parameters":{},"Identifier":"8a84697a-7426-4b25-846b-a8390c6adf46","Type":"DisconnectParticipant","Transitions":{}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-east-1:025713692514:function:connect101-get-prompts","InvocationTimeLimitSeconds":"8","LambdaInvocationAttributes":{"FlowName":"PasswordResetSample"},"ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"c5a725ae-0fd0-4a06-a3fd-f6572711d2f1","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"3e0cd842-dd65-46e5-9530-73df4d276d23","Errors":[{"NextAction":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","ErrorType":"NoMatchingError"}]}},{"Parameters":{"SSML":"$.Attributes.prmThankYou"},"Identifier":"22847f1d-60ee-42f9-bf84-1a3511b67060","Type":"MessageParticipant","Transitions":{"NextAction":"8a84697a-7426-4b25-846b-a8390c6adf46","Errors":[{"NextAction":"8a84697a-7426-4b25-846b-a8390c6adf46","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LoopCount":"2"},"Identifier":"7d9e0611-0ab1-462f-8c98-7e8d991a7fe2","Type":"Loop","Transitions":{"NextAction":"22847f1d-60ee-42f9-bf84-1a3511b67060","Conditions":[{"NextAction":"925eb6a7-b172-41c6-937a-d58115bfe469","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"22847f1d-60ee-42f9-bf84-1a3511b67060","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"SSML":"$.Attributes.prmTempPassword","LexV2Bot":{"AliasArn":"arn:aws:lex:us-east-1:025713692514:bot-alias/DLKIQK8DMO/TSTALIASID"}},"Identifier":"925eb6a7-b172-41c6-937a-d58115bfe469","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","Conditions":[{"NextAction":"7d9e0611-0ab1-462f-8c98-7e8d991a7fe2","Condition":{"Operator":"Equals","Operands":["repeat"]}}],"Errors":[{"NextAction":"22847f1d-60ee-42f9-bf84-1a3511b67060","ErrorType":"NoMatchingCondition"},{"NextAction":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"password":"$.External.password"},"TargetContact":"Current"},"Identifier":"dd17c1e7-cb47-4e59-972d-0c5e06e98d81","Type":"UpdateContactAttributes","Transitions":{"NextAction":"925eb6a7-b172-41c6-937a-d58115bfe469","Errors":[{"NextAction":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.External.statusCode"},"Identifier":"b6d77d71-6b55-4484-88f6-faa6281fb854","Type":"Compare","Transitions":{"NextAction":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","Conditions":[{"NextAction":"dd17c1e7-cb47-4e59-972d-0c5e06e98d81","Condition":{"Operator":"Equals","Operands":["200"]}}],"Errors":[{"NextAction":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"LambdaFunctionARN":"arn:aws:lambda:us-east-1:025713692514:function:ConnectTestFunction","InvocationTimeLimitSeconds":"8","ResponseValidation":{"ResponseType":"STRING_MAP"}},"Identifier":"77c11a71-1b5b-49eb-b38c-f19f2cc08989","Type":"InvokeLambdaFunction","Transitions":{"NextAction":"b6d77d71-6b55-4484-88f6-faa6281fb854","Errors":[{"NextAction":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","ErrorType":"NoMatchingError"}]}},{"Parameters":{"LoopCount":"2"},"Identifier":"b60aacf4-7b02-493e-86eb-33f2ae20f0f3","Type":"Loop","Transitions":{"NextAction":"4f75711a-727f-4b4c-9c8e-f1bba13a71ce","Conditions":[{"NextAction":"d8528394-4550-4511-a839-f1e4091f0dd4","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"4f75711a-727f-4b4c-9c8e-f1bba13a71ce","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"SSML":"$.Attributes.prmRetry"},"Identifier":"d8528394-4550-4511-a839-f1e4091f0dd4","Type":"MessageParticipant","Transitions":{"NextAction":"ea91ba5b-d472-4626-9d23-c53694ced7e6","Errors":[{"NextAction":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","ErrorType":"NoMatchingError"}]}},{"Parameters":{"SSML":"$.Attributes.prmTransfer"},"Identifier":"4f75711a-727f-4b4c-9c8e-f1bba13a71ce","Type":"MessageParticipant","Transitions":{"NextAction":"8cc5d066-7c63-4f73-9ce1-fe0f3f380e7f","Errors":[{"NextAction":"8cc5d066-7c63-4f73-9ce1-fe0f3f380e7f","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.External.statusCode"},"Identifier":"3e0cd842-dd65-46e5-9530-73df4d276d23","Type":"Compare","Transitions":{"NextAction":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","Conditions":[{"NextAction":"1c67e7f5-21c9-420f-a75c-a9372033b33a","Condition":{"Operator":"Equals","Operands":["200"]}}],"Errors":[{"NextAction":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"LoopCount":"2"},"Identifier":"af00c3c5-b53e-45f4-be94-27e5a7dc4aef","Type":"Loop","Transitions":{"NextAction":"4f75711a-727f-4b4c-9c8e-f1bba13a71ce","Conditions":[{"NextAction":"f4864b33-a40f-4dbb-a73f-f844a6f0f310","Condition":{"Operator":"Equals","Operands":["ContinueLooping"]}},{"NextAction":"4f75711a-727f-4b4c-9c8e-f1bba13a71ce","Condition":{"Operator":"Equals","Operands":["DoneLooping"]}}]}},{"Parameters":{"SSML":"$.Attributes.prmRetry"},"Identifier":"f4864b33-a40f-4dbb-a73f-f844a6f0f310","Type":"MessageParticipant","Transitions":{"NextAction":"ee9df9a2-5abe-41f3-a17d-1fc4e32bfc02","Errors":[{"NextAction":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","ErrorType":"NoMatchingError"}]}},{"Parameters":{"ComparisonValue":"$.Lex.SessionAttributes.valid"},"Identifier":"777bb93a-45df-4c18-b196-bfed3f02c95e","Type":"Compare","Transitions":{"NextAction":"4f75711a-727f-4b4c-9c8e-f1bba13a71ce","Conditions":[{"NextAction":"77c11a71-1b5b-49eb-b38c-f19f2cc08989","Condition":{"Operator":"Equals","Operands":["true"]}}],"Errors":[{"NextAction":"4f75711a-727f-4b4c-9c8e-f1bba13a71ce","ErrorType":"NoMatchingCondition"}]}},{"Parameters":{"SSML":"$.Attributes.prmAuthDisclaimer"},"Identifier":"ff51199c-f92e-421f-aade-752456ce4a27","Type":"MessageParticipant","Transitions":{"NextAction":"ee9df9a2-5abe-41f3-a17d-1fc4e32bfc02","Errors":[{"NextAction":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","ErrorType":"NoMatchingError"}]}},{"Parameters":{"SSML":"$.Attributes.prmEmployeeId","LexV2Bot":{"AliasArn":"arn:aws:lex:us-east-1:025713692514:bot-alias/X38EI8SGFH/TSTALIASID"},"LexSessionAttributes":{"prmEmployeeId":"$.Attributes.prmEmployeeId","prmEmployeeIdConfirmation":"$.Attributes.prmEmployeeIdConfirmation","prmRetry":"$.Attributes.prmRetry","prmEmployeeNotFound":"$.Attributes.prmEmployeeNotFound","prmVerificationCode":"$.Attributes.prmVerificationCode","prmEmployeeIdConfirmation2":"$.Attributes.prmEmployeeIdConfirmation2","prmVerificationCode2":"$.Attributes.prmVerificationCode2"}},"Identifier":"ee9df9a2-5abe-41f3-a17d-1fc4e32bfc02","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","Conditions":[{"NextAction":"777bb93a-45df-4c18-b196-bfed3f02c95e","Condition":{"Operator":"Equals","Operands":["authenticate"]}}],"Errors":[{"NextAction":"af00c3c5-b53e-45f4-be94-27e5a7dc4aef","ErrorType":"NoMatchingCondition"},{"NextAction":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","ErrorType":"NoMatchingError"}]}},{"Parameters":{"SSML":"$.Attributes.prmMenu","LexV2Bot":{"AliasArn":"arn:aws:lex:us-east-1:025713692514:bot-alias/DLKIQK8DMO/TSTALIASID"}},"Identifier":"ea91ba5b-d472-4626-9d23-c53694ced7e6","Type":"ConnectParticipantWithLexBot","Transitions":{"NextAction":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","Conditions":[{"NextAction":"ff51199c-f92e-421f-aade-752456ce4a27","Condition":{"Operator":"Equals","Operands":["passwordReset"]}},{"NextAction":"4f75711a-727f-4b4c-9c8e-f1bba13a71ce","Condition":{"Operator":"Equals","Operands":["agent"]}},{"NextAction":"b60aacf4-7b02-493e-86eb-33f2ae20f0f3","Condition":{"Operator":"Equals","Operands":["repeat"]}}],"Errors":[{"NextAction":"b60aacf4-7b02-493e-86eb-33f2ae20f0f3","ErrorType":"NoMatchingCondition"},{"NextAction":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","ErrorType":"NoMatchingError"}]}},{"Parameters":{"Attributes":{"prmGreeting":"$.External.prmGreeting","prmMenu":"$.External.prmMenu","prmTransfer":"$.External.prmTransfer","prmAuthDisclaimer":"$.External.prmAuthDisclaimer","prmEmployeeId":"$.External.prmEmployeeId","prmRetry":"$.External.prmRetry","prmEmployeeIdConfirmation":"$.External.prmEmployeeIdConfirmation","prmEmployeeNotFound":"$.External.prmEmployeeNotFound","prmVerificationCode":"$.External.prmVerificationCode","prmTempPassword":"$.External.prmTempPassword","prmThankYou":"$.External.prmThankYou","prmEmployeeIdConfirmation2":"$.External.prmEmployeeIdConfirmation2","prmVerificationCode2":"$.External.prmVerificationCode2"},"TargetContact":"Current"},"Identifier":"1c67e7f5-21c9-420f-a75c-a9372033b33a","Type":"UpdateContactAttributes","Transitions":{"NextAction":"11f525b0-61de-4fc9-92a0-62b9aa053b63","Errors":[{"NextAction":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","ErrorType":"NoMatchingError"}]}},{"Parameters":{"SSML":"<speak>We are facing technical difficulties. Please call back later</speak>"},"Identifier":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","Type":"MessageParticipant","Transitions":{"NextAction":"8a84697a-7426-4b25-846b-a8390c6adf46","Errors":[{"NextAction":"8a84697a-7426-4b25-846b-a8390c6adf46","ErrorType":"NoMatchingError"}]}},{"Parameters":{"SSML":"$.Attributes.prmGreeting"},"Identifier":"11f525b0-61de-4fc9-92a0-62b9aa053b63","Type":"MessageParticipant","Transitions":{"NextAction":"ea91ba5b-d472-4626-9d23-c53694ced7e6","Errors":[{"NextAction":"9c264a37-832b-41ac-9cfe-d3829d2f94fd","ErrorType":"NoMatchingError"}]}},{"Parameters":{"FlowLoggingBehavior":"Enabled"},"Identifier":"30b7f283-2d71-4b89-8025-2e130f78e49a","Type":"UpdateFlowLoggingBehavior","Transitions":{"NextAction":"c5a725ae-0fd0-4a06-a3fd-f6572711d2f1"}}]}